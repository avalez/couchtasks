<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no;">

    <title>CouchTasks</title>
    <link rel="stylesheet" href="style/main.css">

    <style id="tag_defs">
    </style>

  </head>

  <body>

    <div id="content"></div>

    <footer>
      <a href="#" class="home"></a>
      <a href="#/complete/" class="archive"></a>

      <a id="edittask_btn" class="plain_btn active">Save</a>
    </footer>

    <script type="text/html" id="home_tpl">

      <div id="hdr">&nbsp;</div>

      <form action="#add_task" id="add_task_frm">
        <fieldset>
          <input type="text" name="title" id="add_task_input"
                 placeholder="Add Task" />
        </fieldset>
      </form>

      <!-- <a id="edit_filter">filters</a> -->

      <div id="filterui">
        <ul class="tags">
          {{#tags}}
          <li class="{{class}}"><a data-key="{{tag}}">{{tag}}({{count}})</a></li>
          {{/tags}}
        </ul>
      </div>

      <ul id="notelist">
        <li class="none">Loading ...</li>
      </ul>
    </script>

    <script type="text/html" id="complete_tpl">
      <ul id="notelist">
        <li class="header"><h3>Completed</h3></li>
        {{#notes}}
        <li data-id="{{id}}" data-rev="{{rev}}" data-index="{{index}}"
            class="task deleted">
          <input class="checker" type="checkbox" checked="checked" />
          <a class="title" href="#/task/{{id}}/">{{title}}</span>&nbsp;
          <a class="delete right">delete</a>
        </li>
        {{/notes}}
        {{^notes}}<li class="none">No Completed Tasks</li>{{/notes}}
      </ul>
    </script>

    <script type="text/html" id="addserver_tpl">
      <form action="#add_server" id="syncform">
        <fieldset>
          <input type="text" name="server" placeholder="Host (http://example.com)"
                 required />
          <input type="text" name="database" value="couchtasks"
                 placeholder="mywork" />
          <input type="text" name="username" placeholder="Username (johndoe)" />
          <input type="password" name="password" placeholder="Password" />
        </fieldset>
      </form>

      <ul id="notelist">
        {{#servers}}
        <li data-id="{{id}}" data-rev="{{rev}}" data-server="{{server}}"
            data-database="{{database}}"
            data-username="{{username}}" data-password="{{password}}" class="server">
          {{server}}&nbsp;
          <a class="deleteserver right">delete</a>
        </li>
        {{/servers}}
      </ul>

    </script>

    <script type="text/html" id="task_tpl">
      <h3>{{title}}</h3>
      <form action="#edit" id="edit_task_form">
        <fieldset>
          <div class="textarea">
            <textarea placeholder="Enter Notes" name="notes">{{notes}}</textarea>
          </div>
          <!-- <input type="text" name="tags" value="{{tags}}" placeholder="Tags" /> -->
          <div class="textarea tag_wrapper" style="overflow:auto;">
            {{#usedTags}}
            <a class="tag tag_{{tag}} {{#active}}active{{/active}}" data-key="{{tag}}">
              {{tag}}({{count}})
            </a>
            {{/usedTags}}
          </div>
          <div class="input">
            <input type="checkbox" {{completed}} name="completed" />
            <label>Completed</label>
          </div>
        </fieldset>
        <input type="hidden" name="id" value="{{_id}}" />
      </form>
    </script>

    <script type="text/html" id="sync_tpl">
      <ul id="notelist">
        <li class="header"><h3>Servers</h3></li>
        {{#servers}}
        <li data-id="{{id}}" data-rev="{{rev}}" data-server="{{server}}"
            data-database="{{database}}" data-username="{{username}}"
            data-password="{{password}}" class="server">
          {{server}}&nbsp;
          <div id="feedback"></div>
          <a class="sync right"><div  />sync</a>
        </li>
        {{/servers}}
        {{^servers}}<li class="none">No Servers</li>{{/servers}}
      </ul>
    </script>

    <script type="text/html" id="rows_tpl">
      {{#notes}}
      <li data-id="{{_id}}" data-rev="{{_rev}}" data-index="{{index}}" class="task">
        <!-- <table width="100%" cellspacing="0" id="tag_table"> -->
        <!--   {{#tags}}<td class="tag_{{.}}" data-key="{{.}}"></td>{{/tags}} -->
        <!--   {{^tags}}<td class="blank"></td>{{/tags}} -->
        <!-- </table> -->

        <input class="checker" type="checkbox" />
        <a class="title" href="#/task/{{_id}}/">{{title}}
          <!-- <div class="ttag"> -->
            {{#tags}}<span class="tag tag_{{.}}" data-key="{{.}}">{{.}}</span>{{/tags}}
          <!-- </div> -->
        </a>
        <!-- <span class="arrow right">&rsaquo;</span> -->

        </li>
      {{/notes}}
    </script>

    <script type="text/html" id="tags_tpl">
      {{#tags}}
      <a class="tag tag_{{tag}} {{#active}}active{{/active}}" data-key="{{tag}}">
        {{tag}}({{count}})
      </a>
      {{/tags}}
    </script>

  </body>

  <script src="./js/jquery-1.6.min.js"></script>

  <script src="./js/jquery-ui-1.8.10.custom.min.js"></script>
  <script src="./js/jquery.couch.js"></script>

  <script src="./js/router.js"></script>

  <script src="./js/mustache.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/tasks.js"></script>

</html>
